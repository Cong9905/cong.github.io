<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BTC Wallet Checker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        input, button {
            margin: 10px;
            padding: 10px;
            font-size: 16px;
        }
        #output {
            margin-top: 20px;
            white-space: pre-wrap;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>BTC Wallet Checker</h1>
    <input type="text" id="btcAddress" placeholder="Enter BTC Address" size="50">
    <br>
    <button id="startButton">Start</button>
    <button id="generateButton" disabled>Generate Seed Phrases</button>
    <div id="output"></div>

    <script>
        const outputDiv = document.getElementById("output");
        const generateButton = document.getElementById("generateButton");
        let originalAddress = "";
        let processRunning = false;

        // Blockchair API URL
        const API_URL = "https://api.blockchair.com/bitcoin/dashboards/address/";

        // Step 1: Start - Validate address and fetch balance
        document.getElementById("startButton").addEventListener("click", async () => {
            const address = document.getElementById("btcAddress").value.trim();
            if (!address) {
                outputDiv.textContent = "Please enter a BTC address.";
                return;
            }

            outputDiv.textContent = "Checking address...";

            try {
                // Validate address format (simplified)
                if (!/^[13][a-km-zA-HJ-NP-Z1-9]{25,34}$/.test(address)) {
                    throw new Error("Invalid BTC address format.");
                }

                // Fetch balance and address details from Blockchair
                const response = await fetch(`${API_URL}${address}`);
                if (!response.ok) {
                    throw new Error("Failed to connect to Blockchair API.");
                }

                const data = await response.json();
                const balance = data.data[address]?.address.balance || 0;
                const type = address.startsWith("1") ? "P2PKH (Legacy)" : "P2SH (SegWit)";

                originalAddress = address; // Store the original address for further checks
                outputDiv.textContent = `Address: ${address}\nBalance: ${balance} satoshis\nType: ${type}`;

                // Enable the Generate button
                generateButton.disabled = false;
            } catch (error) {
                outputDiv.textContent = `Error: ${error.message}`;
            }
        });

        // Step 2: Generate Seed Phrases and Validate
        generateButton.addEventListener("click", async () => {
            if (processRunning || !originalAddress) {
                outputDiv.textContent = "Process is already running or address is not verified.";
                return;
            }

            processRunning = true;
            outputDiv.textContent = "Generating seed phrases and verifying...";

            try {
                while (processRunning) {
                    // Generate 12 seed phrases
                    const seedPhrases = generateSeedPhrases();

                    // Derive wallet address (simulated for demo; replace with actual derivation)
                    const derivedAddress = deriveAddressFromSeed(seedPhrases);

                    // Check if derived address matches the original
                    if (derivedAddress === originalAddress) {
                        outputDiv.textContent = `Verification successful!\n\nGenerated Seed Phrases:\n${seedPhrases.join(" ")}`;
                        processRunning = false;
                        break;
                    }
                }
            } catch (error) {
                outputDiv.textContent = `Error: ${error.message}`;
            } finally {
                processRunning = false;
            }
        });

        function generateSeedPhrases() {
            // Generate 12 random seed phrases (replace with real mnemonic generation)
            const words = [
                "apple", "orange", "banana", "grape", "melon", "kiwi", "pear", "plum", "peach", "cherry", 
                "mango", "berry", "pineapple", "lemon", "lime", "fig", "date", "coconut"
            ];
            return Array.from({ length: 12 }, () => words[Math.floor(Math.random() * words.length)]);
        }

        function deriveAddressFromSeed(seedPhrases) {
            // Simulate wallet derivation from seed (replace with actual derivation logic)
            // For demo purposes, assume derived address matches if first word starts with 'a'
            const firstWord = seedPhrases[0];
            return firstWord.startsWith("a") ? originalAddress : "SimulatedIncorrectAddress";
        }
    </script>
</body>
</html>
